{"remainingRequest":"F:\\github\\JYpc\\node_modules\\babel-loader\\lib\\index.js!F:\\github\\JYpc\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\github\\JYpc\\src\\utils\\interception.js","dependencies":[{"path":"F:\\github\\JYpc\\src\\utils\\interception.js","mtime":1591434252242},{"path":"F:\\github\\JYpc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591434226615},{"path":"F:\\github\\JYpc\\node_modules\\babel-loader\\lib\\index.js","mtime":1591434223899},{"path":"F:\\github\\JYpc\\node_modules\\eslint-loader\\index.js","mtime":1591434233286}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsKaW1wb3J0IHsgTWVzc2FnZUJveCwgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IHNlcnZlcmlwIGFzIGlwIH0gZnJvbSAnQC91dGlscy9zZXJ2ZXJJUCc7CmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgaWYgKENvb2tpZXMuZ2V0KCd2dWVfYWRtaW5famlrZXBpbl90b2tlbicpKSB7CiAgICBjb25maWcuaGVhZGVyc1snamlrZXBpbl90b2tlbiddID0gQ29va2llcy5nZXQoJ3Z1ZV9hZG1pbl9qaWtlcGluX3Rva2VuJyk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZyhlcnJvcik7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy8g5oum5oiq5ZON5bqU77yM5YGa57uf5LiA5aSE55CGCiAgaWYgKHJlc3BvbnNlLnN0YXR1cykgewogICAgc3dpdGNoIChyZXNwb25zZS5zdGF0dXMpIHsKICAgICAgY2FzZSAyMDA6CiAgICAgICAgaWYgKGNoZWNrVXJsKHJlc3BvbnNlLmNvbmZpZy51cmwpKSB7CiAgICAgICAgICB2YXIgcmVzdWx0cyA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgaWYgKHJlc3VsdHMuc3RhdHVzID09PSAnMScpIHsKICAgICAgICAgICAgTWVzc2FnZS5zdWNjZXNzKHJlc3VsdHMubXNnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIE1lc3NhZ2UuZXJyb3IocmVzdWx0cy5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwMToKICAgICAgICBNZXNzYWdlQm94LmNvbmZpcm0oJ+eZu+W9leS/oeaBr+WkseaViO+8geivt+mHjeaWsOeZu+W9le+8gScsICfnoa7orqTnmbvlh7onLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ3VzZXIvcmVzZXRUb2tlbicpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzcG9uc2UubWVzc2FnZSB8fCAnRXJyb3InKSk7CiAgICB9CiAgfQoKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwoKZnVuY3Rpb24gY2hlY2tVcmwodXJsKSB7CiAgdmFyIGppZWtvdSA9IHVybC5yZXBsYWNlKGlwLCAnJyk7CgogIGlmIChqaWVrb3UuaW5kZXhPZignc2VsZWN0JykgPiAtMSB8fCBqaWVrb3UuaW5kZXhPZignZ2V0SW5mbycpID4gLTEpIHsKICAgIHJldHVybiBmYWxzZTsKICB9IGVsc2UgewogICAgcmV0dXJuIHRydWU7CiAgfQp9"},{"version":3,"sources":["F:/github/JYpc/src/utils/interception.js"],"names":["axios","Cookies","MessageBox","Message","store","serverip","ip","interceptors","request","use","config","get","headers","error","console","log","Promise","reject","response","status","checkUrl","url","results","data","success","msg","confirm","confirmButtonText","cancelButtonText","type","then","dispatch","location","reload","Error","message","jiekou","replace","indexOf"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,YAApC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAQ,IAAIC,EAArB,QAA+B,kBAA/B;AAEAN,KAAK,CAACO,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,UAAAC,MAAM,EAAI;AACR,MAAIT,OAAO,CAACU,GAAR,CAAY,yBAAZ,CAAJ,EAA4C;AAC1CD,IAAAA,MAAM,CAACE,OAAP,CAAe,eAAf,IAAkCX,OAAO,CAACU,GAAR,CAAY,yBAAZ,CAAlC;AACD;;AACD,SAAOD,MAAP;AACD,CANH,EAOE,UAAAG,KAAK,EAAI;AACPC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAVH;AAaAb,KAAK,CAACO,YAAN,CAAmBW,QAAnB,CAA4BT,GAA5B,CACE,UAAAS,QAAQ,EAAI;AACV;AACA,MAAIA,QAAQ,CAACC,MAAb,EAAqB;AACnB,YAAQD,QAAQ,CAACC,MAAjB;AACE,WAAK,GAAL;AACE,YAAIC,QAAQ,CAACF,QAAQ,CAACR,MAAT,CAAgBW,GAAjB,CAAZ,EAAmC;AACjC,cAAIC,OAAO,GAAGJ,QAAQ,CAACK,IAAvB;;AACA,cAAID,OAAO,CAACH,MAAR,KAAmB,GAAvB,EAA4B;AAC1BhB,YAAAA,OAAO,CAACqB,OAAR,CAAgBF,OAAO,CAACG,GAAxB;AACD,WAFD,MAEO;AACLtB,YAAAA,OAAO,CAACU,KAAR,CAAcS,OAAO,CAACG,GAAtB;AACD;AACF;;AACD;;AACF,WAAK,GAAL;AACEvB,QAAAA,UAAU,CAACwB,OAAX,CAAmB,eAAnB,EAAoC,MAApC,EAA4C;AAC1CC,UAAAA,iBAAiB,EAAE,MADuB;AAE1CC,UAAAA,gBAAgB,EAAE,IAFwB;AAG1CC,UAAAA,IAAI,EAAE;AAHoC,SAA5C,EAIGC,IAJH,CAIQ,YAAM;AACZ1B,UAAAA,KAAK,CAAC2B,QAAN,CAAe,iBAAf,EAAkCD,IAAlC,CAAuC,YAAM;AAC3CE,YAAAA,QAAQ,CAACC,MAAT;AACD,WAFD;AAGD,SARD;AASA,eAAOjB,OAAO,CAACC,MAAR,CAAe,IAAIiB,KAAJ,CAAUhB,QAAQ,CAACiB,OAAT,IAAoB,OAA9B,CAAf,CAAP;AArBJ;AAuBD;;AACD,SAAOjB,QAAP;AACD,CA7BH,EA8BE,UAAAL,KAAK,EAAI;AACP,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAhCH;;AAmCA,SAASO,QAAT,CAAkBC,GAAlB,EAAuB;AACrB,MAAMe,MAAM,GAAGf,GAAG,CAACgB,OAAJ,CAAY/B,EAAZ,EAAgB,EAAhB,CAAf;;AACA,MAAI8B,MAAM,CAACE,OAAP,CAAe,QAAf,IAA2B,CAAC,CAA5B,IAAiCF,MAAM,CAACE,OAAP,CAAe,SAAf,IAA4B,CAAC,CAAlE,EAAqE;AACnE,WAAO,KAAP;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF","sourcesContent":["import axios from 'axios'\r\nimport Cookies from 'js-cookie'\r\nimport { MessageBox, Message } from 'element-ui'\r\nimport store from '@/store'\r\nimport { serverip as ip } from '@/utils/serverIP'\r\n\r\naxios.interceptors.request.use(\r\n  config => {\r\n    if (Cookies.get('vue_admin_jikepin_token')) {\r\n      config.headers['jikepin_token'] = Cookies.get('vue_admin_jikepin_token')\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    console.log(error)\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\naxios.interceptors.response.use(\r\n  response => {\r\n    // 拦截响应，做统一处理\r\n    if (response.status) {\r\n      switch (response.status) {\r\n        case 200:\r\n          if (checkUrl(response.config.url)) {\r\n            var results = response.data\r\n            if (results.status === '1') {\r\n              Message.success(results.msg)\r\n            } else {\r\n              Message.error(results.msg)\r\n            }\r\n          }\r\n          break\r\n        case 401:\r\n          MessageBox.confirm('登录信息失效！请重新登录！', '确认登出', {\r\n            confirmButtonText: '重新登录',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }).then(() => {\r\n            store.dispatch('user/resetToken').then(() => {\r\n              location.reload()\r\n            })\r\n          })\r\n          return Promise.reject(new Error(response.message || 'Error'))\r\n      }\r\n    }\r\n    return response\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nfunction checkUrl(url) {\r\n  const jiekou = url.replace(ip, '')\r\n  if (jiekou.indexOf('select') > -1 || jiekou.indexOf('getInfo') > -1) {\r\n    return false\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n"]}]}